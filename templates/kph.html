{% extends "consolidated_tabs.html" %}

{% set modal_title = 'Add Check In' %}
{% set modal_dropdown_label = 'Returned' %}
{% set modal_dropdown_options = ['Yes', 'Not Yet', 'Thief'] %}

{% include "add_shift_pass_modal.html" %}

{% block table %}
{% if shifts %}
    <thead class="thead">
        <tr>
            <th>Name</th>
            <th>Phone Number</th>
            <th>Cell</th>
            <th>Time of Departure</th>
            <th>Actual</th>
            <th>Goal</th>
            <th>% to Goal</th>
            <th># Packets Out</th>
            <th>Packets</th>
            <th>Returned?</th>
            <th>Next Check In</th>
            <th>Last Check In</th>
            <th></th>
        </tr>
    </thead>
    <tbody class="tbody">
        {% for shift in shifts %}
            {% if shift.status == "In" and shift.returned == False and shift.role == "Canvassing" %}
                <tr>
                    <td>{{shift.volunteer.first_name + ' ' + shift.volunteer.last_name}}</td>
                    <td>{{shift.volunteer.phone_number}}</td>
                    <td>{{shift.volunteer.cellphone}}</td>
                    <td>{{shift.departure}}</td>
                    <td>{{shift.actual}}</td>
                    <td>{{shift.goal}}</td>
                    <td>{{shift.actual / shift.goal}}</td>
                    
                    <td>{{shift.packets_given}}</td>
                    <td>{{shift.packet_names}}</td>
                    <td>{{shift.returned}}</td>
                    <td><!-- Literally just last check in + (some timedelta value 1 hr default)--></td>
                    <td>{{shift.last_contact}}</td> <!--display most recent contact + note, create another window that allows you to view all check ins-->
                    <td>
                        <a href="#" onclick="openModal('add_modal', 'modal_shift_id', {{shift.id}})">Add Check In</a></td>
                    </tr>
            {% endif %}
        {% endfor %}
    </tbody>
{% endif %}
{% endblock %}


