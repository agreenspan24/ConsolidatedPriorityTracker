{% extends "consolidated_tabs.html" %}

{% block table %}
    {% if shifts %}
        <thead class="thead">
            <tr>
                <th>Name</th>
                <th>Phone</th>
                <th>Cell</th>
                <th>Time</th>
                <th>Role</th>
                <th>Event</th>
                <th># of Passes</th>
                <th>Time of Last Pass</th>
                <th>Status</th>
                <th>New Note</th>
            </tr>
        </thead>
        <tbody class="tbody">
            {% for shift in shifts %}
                {% if shift.flake == True %}
                <tr id="row-{{shift.id}}">
                    <td id="name-{{shift.id}}">
                        <span id="vanid-{{shift.id}}" class="hide">{{shift.volunteer.van_id}}</span>
                        {{shift.volunteer.first_name + ' ' + shift.volunteer.last_name}}
                    </td>
                    <td>{{shift.volunteer.phone_number}}</td>
                    <td>
                        <input id='phone-{{shift.id}}' name="cellphone" type="text" value="{{shift.volunteer.cellphone if not shift.volunteer.cellphone == None}}"/>
                    </td>
                    <td>{{shift.time}}</td>
                    <td>{{shift.role}}</td>
                    <td>{{shift.eventype}}</td>
                    <td>{{shift.flake_passed}}</td>
                    <td>{{shift.last_contact}}</td>
                    <td>
                        <select id='status-{{shift.id}}' onchange="updateElem('status-{{shift.id}}', 'status')" value='{{shift.status}}'>
                            <option value="No Show">Flake</option>
                            <option value='Not Contacted'>Not Contacted</option>
                            <option value='Rescheduled'>Rescheduled</option>
                            <option value='Completed - Not Rescheduled'>Completed - Not Rescheduled</option>
                            <option value='Completed - Completed Today'>Completed - Completed Today</option>
                        </select>
                    </td>
                    <td>
                        <input id='note-{{shift.id}}' name="note" type='text' placeholder="Hit Enter to Save">
                    </td>
                    {% if shift.notes != 0 %}
                        {% for note in shift.notes[::-1] %}
                            <td>{{note.time.strftime('%I:%M %p')}}: {{note.text}}</td>
                        {% endfor %}
                    {% endif %}
                </tr>
                {% endif %}
            {% endfor%}
        </tbody>
    {% endif %}
{% endblock %}

